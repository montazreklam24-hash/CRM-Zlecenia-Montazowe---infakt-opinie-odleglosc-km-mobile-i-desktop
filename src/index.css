/* Custom fonts - must be first */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   THEME SYSTEM - 4 MOTYWY
   ============================================ */

/* MOTYW 1: Glass Minimal (domyślny) - styl Notion/Linear */
:root, [data-theme="glass"] {
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
  
  /* Tła - ZDJĘCIE MIASTA Z BILLBOARDAMI */
  --bg-page: url('https://images.unsplash.com/photo-1534430480872-3498386e7856?w=1920&q=80') center/cover fixed;
  --bg-card: rgba(255, 255, 255, 0.50);
  --bg-card-hover: rgba(255, 255, 255, 0.65);
  --bg-surface: rgba(255, 255, 255, 0.05);
  --bg-input: rgba(255, 255, 255, 0.80);
  --bg-header: rgba(255, 255, 255, 0.60);
  
  /* Kolory tekstu */
  --text-primary: #1e293b;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;
  --text-inverse: #ffffff;
  
  /* Akcenty */
  --accent-primary: #6366f1;
  --accent-primary-hover: #4f46e5;
  --accent-success: #10b981;
  --accent-warning: #f59e0b;
  --accent-danger: #ef4444;
  --accent-orange: #f97316;
  
  /* Bordery */
  --border-light: rgba(0, 0, 0, 0.06);
  --border-medium: rgba(0, 0, 0, 0.1);
  --border-strong: rgba(0, 0, 0, 0.15);
  
  /* Cienie */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.12);
  --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.06);
  
  /* Zaokrąglenia - minimalne */
  --radius-sm: 2px;
  --radius-md: 3px;
  --radius-lg: 3px;
  --radius-xl: 4px;
  
  /* Blur - mocny efekt szkła */
  --blur: blur(20px);
  
  /* Glass border */
  --glass-border: 1px solid rgba(255, 255, 255, 0.3);
  
  /* Scrollbar */
  --scrollbar-bg: #f1f5f9;
  --scrollbar-thumb: #cbd5e1;
  --scrollbar-thumb-hover: #94a3b8;
  
  /* Kanban kolumny */
  --column-prepare: #475569;
  --column-mon: #e11d48;
  --column-tue: #059669;
  --column-wed: #7c3aed;
  --column-thu: #d97706;
  --column-fri: #2563eb;
  --column-sat: #ea580c;
  --column-sun: #b45309;
  --column-done: #16a34a;
}

/* MOTYW 2: Dark Pro - styl GitHub/Discord */
[data-theme="dark"] {
  --bg-page: #0d1117;
  --bg-card: #161b22;
  --bg-card-hover: #1c2128;
  --bg-surface: #21262d;
  --bg-input: #0d1117;
  --bg-header: #161b22;
  --glass-border: 1px solid #30363d;
  
  --text-primary: #e6edf3;
  --text-secondary: #8b949e;
  --text-muted: #6e7681;
  --text-inverse: #0d1117;
  
  --accent-primary: #58a6ff;
  --accent-primary-hover: #79b8ff;
  --accent-success: #3fb950;
  --accent-warning: #d29922;
  --accent-danger: #f85149;
  --accent-orange: #db6d28;
  
  --border-light: #21262d;
  --border-medium: #30363d;
  --border-strong: #484f58;
  
  --shadow-sm: 0 0 0 1px rgba(0,0,0,0.3);
  --shadow-md: 0 3px 6px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.5);
  --shadow-card: 0 1px 3px rgba(0,0,0,0.3);
  
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;
  
  --blur: none;
  
  --scrollbar-bg: #161b22;
  --scrollbar-thumb: #30363d;
  --scrollbar-thumb-hover: #484f58;
  
  --column-prepare: #8b949e;
  --column-mon: #f85149;
  --column-tue: #3fb950;
  --column-wed: #a371f7;
  --column-thu: #d29922;
  --column-fri: #58a6ff;
  --column-sat: #db6d28;
  --column-sun: #bf8700;
  --column-done: #238636;
}

/* MOTYW 3: Trello Classic - styl Trello/Asana */
[data-theme="trello"] {
  --bg-page: linear-gradient(180deg, #0079bf 0%, #026aa7 100%);
  --bg-card: #ffffff;
  --bg-card-hover: #f4f5f7;
  --bg-surface: rgba(235, 236, 240, 0.95);
  --bg-input: #ffffff;
  --bg-header: rgba(0, 0, 0, 0.15);
  --glass-border: none;
  
  --text-primary: #172b4d;
  --text-secondary: #5e6c84;
  --text-muted: #a5adba;
  --text-inverse: #ffffff;
  
  --accent-primary: #0079bf;
  --accent-primary-hover: #026aa7;
  --accent-success: #61bd4f;
  --accent-warning: #f2d600;
  --accent-danger: #eb5a46;
  --accent-orange: #ff9f1a;
  
  --border-light: rgba(9, 30, 66, 0.08);
  --border-medium: rgba(9, 30, 66, 0.13);
  --border-strong: rgba(9, 30, 66, 0.2);
  
  --shadow-sm: 0 1px 0 rgba(9,30,66,0.13);
  --shadow-md: 0 1px 0 rgba(9,30,66,0.25);
  --shadow-lg: 0 8px 16px -4px rgba(9,30,66,0.25);
  --shadow-card: 0 1px 0 rgba(9,30,66,0.25);
  
  --radius-sm: 2px;
  --radius-md: 3px;
  --radius-lg: 4px;
  --radius-xl: 6px;
  
  --blur: none;
  
  --scrollbar-bg: rgba(9,30,66,0.08);
  --scrollbar-thumb: rgba(9,30,66,0.2);
  --scrollbar-thumb-hover: rgba(9,30,66,0.35);
  
  --column-prepare: #5e6c84;
  --column-mon: #eb5a46;
  --column-tue: #61bd4f;
  --column-wed: #c377e0;
  --column-thu: #f2d600;
  --column-fri: #0079bf;
  --column-sat: #ff9f1a;
  --column-sun: #ffab4a;
  --column-done: #61bd4f;
}

/* MOTYW 4: Orange Modern - pomarańczowy, nowoczesny */
[data-theme="orange"] {
  --bg-page: linear-gradient(180deg, #f97316 0%, #ea580c 100%);
  --bg-card: #ffffff;
  --bg-card-hover: #fff7ed;
  --bg-surface: rgba(255, 247, 237, 0.95);
  --bg-input: #ffffff;
  --bg-header: rgba(0, 0, 0, 0.2);
  --glass-border: none;
  
  --text-primary: #1c1917;
  --text-secondary: #78716c;
  --text-muted: #a8a29e;
  --text-inverse: #ffffff;
  
  --accent-primary: #f97316;
  --accent-primary-hover: #ea580c;
  --accent-success: #22c55e;
  --accent-warning: #f59e0b;
  --accent-danger: #ef4444;
  --accent-orange: #f97316;
  
  --border-light: rgba(28, 25, 23, 0.08);
  --border-medium: rgba(28, 25, 23, 0.13);
  --border-strong: rgba(28, 25, 23, 0.2);
  
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 8px 16px -4px rgba(0, 0, 0, 0.15);
  --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08);
  
  --radius-sm: 2px;
  --radius-md: 3px;
  --radius-lg: 4px;
  --radius-xl: 6px;
  
  --blur: none;
  
  --scrollbar-bg: rgba(28, 25, 23, 0.08);
  --scrollbar-thumb: rgba(28, 25, 23, 0.2);
  --scrollbar-thumb-hover: rgba(28, 25, 23, 0.35);
  
  --column-prepare: #475569;
  --column-mon: #f97316;
  --column-tue: #ea580c;
  --column-wed: #d97706;
  --column-thu: #c2410c;
  --column-fri: #f97316;
  --column-sat: #ea580c;
  --column-sun: #d97706;
  --column-done: #16a34a;
}

/* MOTYW 5: Bitrix Pro - profesjonalny, biznesowy */
[data-theme="bitrix"] {
  --bg-page: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 50%, #90CAF9 100%);
  --bg-card: rgba(255, 255, 255, 0.85);
  --bg-card-hover: rgba(255, 255, 255, 0.95);
  --bg-surface: rgba(255, 255, 255, 0.6);
  --bg-input: #ffffff;
  --bg-header: rgba(255, 255, 255, 0.8);
  
  --text-primary: #263238;
  --text-secondary: #546E7A;
  --text-muted: #90A4AE;
  --text-inverse: #ffffff;
  
  --accent-primary: #00AEEF;
  --accent-primary-hover: #009BD6;
  --accent-success: #7BD500;
  --accent-warning: #FFD400;
  --accent-danger: #FF5752;
  --accent-orange: #FF9E0F;
  
  --border-light: rgba(38, 50, 56, 0.08);
  --border-medium: rgba(38, 50, 56, 0.15);
  --border-strong: rgba(38, 50, 56, 0.25);
  
  --shadow-sm: 0 1px 2px rgba(38, 50, 56, 0.05);
  --shadow-md: 0 4px 8px rgba(38, 50, 56, 0.08);
  --shadow-lg: 0 8px 24px rgba(38, 50, 56, 0.12);
  --shadow-card: 0 2px 4px rgba(38, 50, 56, 0.06);
  
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;
  
  --blur: blur(12px);
  --glass-border: 1px solid rgba(255, 255, 255, 0.4);
  
  --scrollbar-bg: #ECEFF1;
  --scrollbar-thumb: #CFD8DC;
  --scrollbar-thumb-hover: #B0BEC5;
  
  --column-prepare: #78909C;
  --column-mon: #FF5752;
  --column-tue: #7BD500;
  --column-wed: #AB47BC;
  --column-thu: #FFD400;
  --column-fri: #29B6F6;
  --column-sat: #FF9E0F;
  --column-sun: #8D6E63;
  --column-done: #7BD500;
}

/* MOTYW 6: Trello Modern - nowoczesny, clean */
[data-theme="trello-modern"] {
  --bg-page: #F4F5F7;
  --bg-card: #ffffff;
  --bg-card-hover: #F4F5F7;
  --bg-surface: #EBECF0;
  --bg-input: #FAFBFC;
  --bg-header: #ffffff;
  
  --text-primary: #172B4D;
  --text-secondary: #5E6C84;
  --text-muted: #6B778C;
  --text-inverse: #ffffff;
  
  --accent-primary: #0079BF;
  --accent-primary-hover: #026AA7;
  --accent-success: #61BD4F;
  --accent-warning: #F2D600;
  --accent-danger: #EB5A46;
  --accent-orange: #FF9F1A;
  
  --border-light: #DFE1E6;
  --border-medium: #C1C7D0;
  --border-strong: #A5ADBA;
  
  --shadow-sm: 0 1px 2px rgba(9, 30, 66, 0.08);
  --shadow-md: 0 3px 5px rgba(9, 30, 66, 0.12);
  --shadow-lg: 0 8px 16px -4px rgba(9, 30, 66, 0.18);
  --shadow-card: 0 1px 1px rgba(9, 30, 66, 0.25), 0 0 1px rgba(9, 30, 66, 0.31);
  
  --radius-sm: 3px;
  --radius-md: 4px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  
  --blur: none;
  --glass-border: none;
  
  --scrollbar-bg: #DFE1E6;
  --scrollbar-thumb: #C1C7D0;
  --scrollbar-thumb-hover: #A5ADBA;
  
  --column-prepare: #5E6C84;
  --column-mon: #EB5A46;
  --column-tue: #61BD4F;
  --column-wed: #C377E0;
  --column-thu: #F2D600;
  --column-fri: #0079BF;
  --column-sat: #FF9F1A;
  --column-sun: #FFAB4A;
  --column-done: #61BD4F;
}

/* ============================================
   GLOBAL STYLES
   ============================================ */

body {
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--bg-page);
  color: var(--text-primary);
  min-height: 100vh;
  transition: background 0.3s ease, color 0.3s ease;
}

/* Glass theme - Warszawa Pałac Kultury i Nauki */
:root body,
[data-theme="glass"] body,
body[data-theme="glass"] {
  background: url('https://images.unsplash.com/photo-1574958269340-fa927503f3dd?w=1920&q=80') center/cover fixed;
  position: relative;
}

/* Przyciemnienie dla czytelności - bardzo delikatne 3-5% */
:root body::before,
[data-theme="glass"] body::before,
body[data-theme="glass"]::before {
  content: '';
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.03) 100%);
  pointer-events: none;
  z-index: 0;
}

:root body > *,
[data-theme="glass"] body > *,
body[data-theme="glass"] > * {
  position: relative;
  z-index: 1;
}

/* Dark theme needs fixed background */
[data-theme="dark"] body,
body[data-theme="dark"] {
  background: #0d1117;
}

[data-theme="dark"] body::before,
body[data-theme="dark"]::before {
  display: none;
}

/* Trello theme needs fixed background */
[data-theme="trello"] body,
body[data-theme="trello"] {
  background: linear-gradient(180deg, #0079bf 0%, #026aa7 100%);
  background-attachment: fixed;
}

[data-theme="trello"] body::before,
body[data-theme="trello"]::before {
  display: none;
}

/* Orange theme needs fixed background */
[data-theme="orange"] body,
body[data-theme="orange"] {
  background: linear-gradient(180deg, #f97316 0%, #ea580c 100%);
  background-attachment: fixed;
}

[data-theme="orange"] body::before,
body[data-theme="orange"]::before {
  display: none;
}

/* Bitrix theme needs fixed background */
[data-theme="bitrix"] body,
body[data-theme="bitrix"] {
  background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 50%, #90CAF9 100%);
  background-attachment: fixed;
}

[data-theme="bitrix"] body::before,
body[data-theme="bitrix"]::before {
  display: none;
}

/* Trello Modern theme needs fixed background */
[data-theme="trello-modern"] body,
body[data-theme="trello-modern"] {
  background: linear-gradient(180deg, #F5F7FA 0%, #E8ECF1 100%);
  background-attachment: fixed;
}

[data-theme="trello-modern"] body::before,
body[data-theme="trello-modern"]::before {
  display: none;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Card styles */
.theme-card {
  background: var(--bg-card);
  border: var(--glass-border, 1px solid var(--border-light));
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-card), 0 0 40px rgba(0,0,0,0.03);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  transition: all 0.2s ease;
}

.theme-card:hover {
  background: var(--bg-card-hover);
  box-shadow: var(--shadow-md), 0 8px 32px rgba(0,0,0,0.08);
  transform: translateY(-2px);
}

/* Surface (columns, panels) */
.theme-surface {
  background: var(--bg-surface);
  border: var(--glass-border, 1px solid var(--border-light));
  border-radius: var(--radius-lg);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
}

/* Header */
.theme-header {
  background: var(--bg-header);
  border-bottom: var(--glass-border, 1px solid var(--border-light));
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
}

/* Input fields */
.theme-input {
  background: var(--bg-input);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  transition: all 0.2s ease;
}

.theme-input:focus {
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
  outline: none;
}

/* Buttons */
.theme-btn-primary {
  background: var(--accent-primary);
  color: var(--text-inverse);
  border-radius: var(--radius-md);
  font-weight: 600;
  transition: all 0.2s ease;
}

.theme-btn-primary:hover {
  background: var(--accent-primary-hover);
}

/* Text colors */
.theme-text {
  color: var(--text-primary);
}

.theme-text-secondary {
  color: var(--text-secondary);
}

.theme-text-muted {
  color: var(--text-muted);
}

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

.animate-spin {
  animation: spin 1s linear infinite;
}

/* ============================================
   SCROLLBAR
   ============================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-bg);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* ============================================
   MISC
   ============================================ */

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Leaflet overrides */
.leaflet-container {
  font-family: var(--font-sans);
}

.leaflet-popup-content-wrapper {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: 0;
  background: var(--bg-card);
}

.leaflet-popup-content {
  margin: 12px 16px;
  color: var(--text-primary);
}

.leaflet-popup-tip {
  box-shadow: none;
  background: var(--bg-card);
}

.custom-marker-icon {
  background: none !important;
  border: none !important;
}

.custom-icon {
  background: none !important;
  border: none !important;
}

::selection {
  background: var(--accent-primary);
  color: var(--text-inverse);
}

*:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
}

html {
  scroll-behavior: smooth;
}

/* Legacy glass class (for backwards compatibility) */
.glass {
  background: var(--bg-card);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
}

/* ============================================
   MOBILE-SPECIFIC STYLES
   ============================================ */

/* Mobile app container - smooth scrolling */
.mobile-app {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* Ensure touch scrolling works everywhere */
@media (pointer: coarse) {
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Make cards scrollable without blocking page scroll */
  .mobile-app [style*="touch-action: pan-y"] {
    touch-action: pan-y !important;
  }
  
  /* Larger tap targets for mobile */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Smooth momentum scrolling */
  .mobile-app {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
}

/* Hide scrollbar on mobile but keep functionality */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Mobile-specific animations */
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  .mobile-app {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
  
  /* Fixed bottom bar with safe area */
  .mobile-app .fixed.bottom-0 {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
}

