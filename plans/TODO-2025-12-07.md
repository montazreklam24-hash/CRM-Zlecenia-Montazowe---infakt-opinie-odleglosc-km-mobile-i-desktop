# CRM MontaÅ¼ Reklam 24 - Lista zadaÅ„ do zrobienia

**Data:** 7 grudnia 2025
**Status:** CRM dziaÅ‚a na https://crm.montazreklam24.pl/ (bez logowania)

---

## ðŸ”´ PILNE - Do naprawy

### 1. Miniatury zdjÄ™Ä‡ nie Å‚adujÄ… siÄ™
- **Problem:** Po dodaniu zdjÄ™Ä‡ do zlecenia nie wyÅ›wietlajÄ… siÄ™ miniatury
- **Przyczyna:** Tabela `job_images` nie istnieje w bazie, obsÅ‚uga obrazÃ³w wyÅ‚Ä…czona w `jobs.php`
- **RozwiÄ…zanie:** 
  - UtworzyÄ‡ tabelÄ™ `job_images` w bazie
  - DodaÄ‡ funkcje `saveJobImages()` i `getJobImages()` do `jobs.php`
  - Lub przechowywaÄ‡ obrazy jako base64 w kolumnie JSON

### 2. Logowanie nie dziaÅ‚a
- **Problem:** Logowanie zwraca bÅ‚Ä…d, obecnie wyÅ‚Ä…czone (kto zna link wchodzi)
- **Przyczyna:** NagÅ‚Ã³wek Authorization nie jest przekazywany przez Apache
- **RozwiÄ…zanie:**
  - NaprawiÄ‡ `.htaccess` (dodane, ale nie testowane)
  - PrzetestowaÄ‡ endpoint `/api/login`
  - WÅ‚Ä…czyÄ‡ logowanie w `config.php` (requireAuth)

### 3. Google Maps API nie poÅ‚Ä…czone
- **Problem:** Geokodowanie adresÃ³w uÅ¼ywa Nominatim (OSM) zamiast Google Maps
- **RozwiÄ…zanie:** 
  - ZmieniÄ‡ `geocodeAddress()` w `JobCard.tsx` na Google Maps Geocoding API
  - Klucz jest w `api/config.php`: `GOOGLE_MAPS_API_KEY`

---

## ðŸŸ¡ DO POPRAWY

### 4. Karta edytowalna od razu (bez przycisku "Edytuj")
- **Problem:** Trzeba klikaÄ‡ "Edytuj" Å¼eby mÃ³c zmieniaÄ‡ dane w karcie
- **Oczekiwane:** Karta od razu edytowalna po otwarciu
- **Auto-zapis:** Zapisuje siÄ™ automatycznie po zamkniÄ™ciu (klikniÄ™ciu "WrÃ³Ä‡")

### 5. Analiza Gemini na istniejÄ…cej karcie
- **Problem:** Gemini analizuje tylko przy tworzeniu nowego zlecenia
- **Oczekiwane:** Na istniejÄ…cej karcie teÅ¼ jest okienko do wklejenia treÅ›ci z wÄ…tku mailowego
- **DziaÅ‚anie:** Wklejam nowÄ… treÅ›Ä‡ z maila â†’ AI czyta i aktualizuje:
  - Adres (jeÅ›li pojawiÅ‚ siÄ™ nowy)
  - Telefon (jeÅ›li siÄ™ zmieniÅ‚)
  - Opis/zakres prac (dopisuje nowe info)
  - Inne dane kontaktowe
- **Przypadek uÅ¼ycia:** Klient odpisaÅ‚ w wÄ…tku z nowymi informacjami

### 6. Adres - logika wyboru
- **Status:** CzÄ™Å›ciowo naprawione
- Dodano opcjÄ™ "PomiÅ„ - zapisz z obecnym adresem"
- Do przetestowania czy dziaÅ‚a prawidÅ‚owo

### 5. Ctrl+V dla zdjÄ™Ä‡
- **Status:** Dodane, do przetestowania
- Powinno dziaÅ‚aÄ‡ - wklejanie obrazkÃ³w z schowka

---

## ðŸŸ¢ DZIAÅA

- âœ… Zapisywanie zleceÅ„ do bazy
- âœ… Gemini analizuje treÅ›Ä‡ maili
- âœ… Dashboard z kafelkami (Kanban)
- âœ… Edycja zleceÅ„
- âœ… Baza danych na serwerze (monciu_crm)
- âœ… Frontend na https://crm.montazreklam24.pl/

---

## ðŸ“ Pliki konfiguracyjne

- **Klucze API:** `D:\API_Keys\keys.json`
- **Config PHP:** `api/config.php`
- **Baza danych:** `monciu_crm` (user: `monciu_crm`, pass: `Mr03984!`)
- **FTP:** `ftp.monciu.ehost.pl` (user: `m24_crm@monciu.ehost.pl`)

---

## ðŸ”œ PRZYSZÅE FUNKCJE

- Rozszerzenie Chrome do Gmail (plan w `plans/001-chrome-extension-gmail-crm.md`)
- Integracja inFakt (proformy, faktury)
- Automatyczne etykiety Gmail -> CRM
- Powiadomienia SMS/email

